<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Track File Converter</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #222;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 {
    color: #00ffcc;
  }
  textarea {
    width: 90%;
    height: 200px;
    margin: 10px 0;
    font-size: 16px;
    padding: 10px;
    background-color: #333;
    color: #fff;
    border: 2px solid #00ffcc;
    border-radius: 8px;
  }
  button {
    background-color: #00ffcc;
    color: #000;
    border: none;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
  }
  button:hover {
    background-color: #00cca3;
  }
</style>
</head>
<body>
  <h1>Track File Converter</h1>
  <textarea id="input" placeholder="Paste track file data here..."></textarea>
  <button onclick="convert()">Convert</button>
  <textarea id="output" placeholder="Converted output will appear here..."></textarea>
<script>
function convert() {
  const lines = document.getElementById('input').value.trim().split(/\n+/);
  let lats = [];
  let lons = [];
  let intens = [];
  let mslp = [];

  lines.forEach(line => {
    const parts = line.split(/\s*,\s*/);
    if (parts.length >= 10) {
      // lat and lon parsing (field 6 and 7)
      let latStr = parts[6];
      let lonStr = parts[7];
      let lat = parseFloat(latStr.slice(0, -1)) / 10.0;
      let lon = parseFloat(lonStr.slice(0, -1)) / 10.0;
      if (latStr.endsWith('S')) lat = -lat;
      if (lonStr.endsWith('W')) lon = -lon;
      lats.push(lat);
      lons.push(lon);

      // intensity (field 8)
      intens.push(parseInt(parts[8]));

      // MSLP (field 9)
      mslp.push(parseInt(parts[9]));
    }
  });

  let output = '';
  output += `lats = np.array([${lats.join(',')}])\n`;
  output += `lons = np.array([${lons.join(',')}])\n`;
  output += `Intens = np.array([${intens.join(',')}])\n`;
  output += `MSLP = np.array([${mslp.join(',')}])`;

  document.getElementById('output').value = output;
}
</script>
</body>
</html>
